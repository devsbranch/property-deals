{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <div class="d-flex justify-content-center flex-wrap flex-md-nowrap align-items-center py-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                <p class="text-center">{{ message }}</p>
            </div>
            {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
<hr>
    <div class="row">
        <div class="col col-sm-12 col-md-9 col-lg-9">
            <!--        Property Listing Card-->
            {% for property_listing in property_listings %}
                <div class="card shadow mb-3" style="max-width: 700px;">
                    <div class="row g-0">
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            {% for photo_list in photos_list %}
                                {% if photo_list[0] == property_listing.images_folder %}
                                    {% if property_listing.photos_location == "app_server_storage" %}
                                        <img class="m-2 mt-3" src="{{ url_for('static', filename=image_folder + property_listing.images_folder + photo_list[1] ) }}" alt="{{ property_listing.name }}">
                                    {% elif property_listing.photos_location == "amazon_s3" %}
                                        <img class="m-2 mt-3" src="{{ amazon_s3_url + '/' + image_folder + property_listing.images_folder + photo_list[1] }}" alt="{{ property_listing.name }}">
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class="col-xs-8 col-sm-8 col-md-8">
                            <div class="card-body">
                                <h5 class="card-title mb-0"><a href="#">{{ property_listing.name }}</a></h5>
                                <p class="card-text mb-0">{% if property_listing.desc.__len__() >= 35 %} {{ property_listing.desc[:35] + '...' }} {% else %}  {{ property_listing.desc }} {% endif %}</p>
                                <p class="card-text mb-0"><small>{{ property_listing.date_listed.strftime("%d/%m/%Y") }} | {{ property_listing.price }} | {{ property_listing.location }}</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
    <!--        End Property Listing Card-->
        </div>
    </div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
